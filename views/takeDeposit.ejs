<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Deposit Conditions</title>
	<style>
		table {
			border-collapse: collapse;
			width: 100%;
		}

		th, td {
			border: 1px solid black;
			padding: 8px;
			text-align: left;
		}

		th {
			background-color: #f2f2f2;
		}

		tr:nth-child(even) {
			background-color: #f2f2f2;
		}
	</style>
</head>
<body>
<h1>Deposit Conditions</h1>
<table>
	<thead>
	<tr>
		<th>Deposit Name</th>
		<th>Deposit Type Name</th>
		<th>Currency</th>
		<th>Action</th>
	</tr>
	</thead>
	<tbody>
	<% depositConditions.forEach((deposit) => { %>
		<tr>
			<td><%= deposit.deposit_condition_name %></td>
			<td><%= deposit.deposit_types.deposit_type_name %></td>
			<td><%= deposit.currency_deposit_conditioins_currencyTocurrency.currecy_name %></td>
			<td>
				<button>Take</button>
			</td>
		</tr>
	<% }); %>
	</tbody>
</table>
<script>
	// Function to send data to the server
	async function sendData(depositData) {
		try {
			const response = await fetch("/deposit/take-deposit", {
				method: "POST",
				headers: {
					"Content-Type": "application/json",
				},
				body: JSON.stringify(depositData),
			});

			const responseData = await response.json();
			console.log(responseData);
			// Handle server response here
		} catch (error) {
			console.error("Error:", error);
		}
	}

	// Find all buttons on the page
	const buttons = document.querySelectorAll("button");

	// Add click event listener to each button
	buttons.forEach((button) => {
		button.addEventListener("click", async () => {
			// Find the table row where the button is located
			const row = button.closest("tr");

			// Get data from the table cells
			const depositName = row.cells[0].textContent;
			const depositTypeName = row.cells[1].textContent;
			const currency = row.cells[2].textContent;

			// Create an object with the data
			const depositData = {
				depositConditionName: depositName,
				depositTypeName,
				currency,
			};

			// Send data to the server
			await sendData(depositData);
		});
	});
</script>
</body>
</html>
